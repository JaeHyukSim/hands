<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bangkoklab.findHandService.data.mapper.HandMapper">
	<resultMap type="hand" id="handResult">
		<result column="job_id" property="jobId"/>
		<result column="job_user_uuid" property="jobUserUUid"/>
		<result column="category_id" property="categoryId"/>
		<result column="content" property="content"/>
		<result column="job_regdate" property="jobRegdate"/>
		<result column="working_hour" property="workingHour"/>
		<result column="job_credit" property="jobCredit"/>
		<result column="working_date" property="workingDate"/>
		<result column="working_address" property="workingAddress"/>
		<result column="status" property="status"/>
	</resultMap>
	
	<insert id="insertHand" parameterType="hand">
		INSERT into job(
			job_id,
			job_user_uuid,
			category_id,
			content,
			job_regdate,
			working_hour,
			job_credit,
			working_date,
			working_address,
			status
		)values(
			#{jobId},
			#{jobUserUUid},
			#{categoryId},
			#{content},
			#{jobRegdate},
			#{workingHour},
			#{jobCredit},
			#{workingDate},
			#{workingAddress},
			#{status}
		)
	</insert>
	
	<delete id="deleteHand">
		delete 
		from job
		where job_id = #{jobId}
	</delete>
	
	<update id="updateHand">
		UPDATE 
			job 
		SET
			job_user_uuid = #{jobUserUUid},
			category_id = #{categoryId},
			content = #{content},
			job_regdate = #{jobRegdate},
			working_hour = #{workingHour},
			job_credit = #{jobCredit},
			working_date = #{workingDate},
			working_address = #{workingAddress},
			status = #{status}
		WHERE
			job_id = #{jobId}
	</update>
	
	<select id="findHands" resultMap="handResult">
		SELECT 
				*
		FROM 
			job j 
	</select>
	<!-- 카테고리 별 조회 -->
	<!-- select category_id from category where category_name = " "; -->
	<select id="findByCategory" parameterType="category" resultMap="handResult">
	SELECT 
		* 
	FROM 
		job
	WHERE 
		category_id IN  ( SELECT 
							category_id 
						  FROM 
						  	category
    					  WHERE 
    					  	category_name = #{categoryName} );
	</select>
	
</mapper>
